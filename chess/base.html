<!DOCTYPE html>
<head>
    <title>Chess Tournament Leaderboard</title>
    <link rel="stylesheet" type="text/css" href="/css">
    <style>
        #admin {
            border: red 1px;
            margin: 1px;
            background-color: lightcoral;
        }
        .header {
            font-size: x-large;
            font-weight: bold;
            float: left;
        }
        div p {
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body>
    <div style="height: 35px;display: grid;grid-auto-flow: column;grid-template-columns: 25% 50% 25%;">
        <label class="header">Chess Leaderboard</label>
        <div id="admin" style="display: <REPLACE id='admin'/>;vertical-align: middle;align-items: center;justify-content: center;">
            <input type="button" value="Create New User" onclick="newuser();" style="margin-left: 5px; width: 30%; height: 20px;">
            <input type="button" value="Modify User" onclick="moduser();" style="margin-left: 5px; width: 30%; height: 20px;">
            <input type="button" value="Update Rankings" onclick="matchend();" style="width: 30%; height: 20px;">
        </div>
        <REPLACE id='loginBtn'/>
    </div>
    <div id="popup" style="background: lightsalmon; width:100%; height:50px; border: 2px black solid; padding: 2px;">
        <p><strong><a href="/chess/terms">Chess Terms and Conditions are now in affect</a></strong>
            <br><a href="#" onclick="document.getElementById('popup').style.display='none';">Click here to close</a>
        </p>
    </div>
    <div id="popup2" style="margin-top:10px; background: lightgreen; width:100%; height:50px; border: 2px black solid; margin-bottom: 10px;">
        <p><strong><a href="/chess/coa">Chess Court of Appeals is now open to hear any issues</a></strong>
            <br><a href="#" onclick="document.getElementById('popup2').style.display='none';">Click here to close</a>
        </p>
    </div>
    <table>
        <tr><th>Position</th><th>Score</th><th>Name</th><th>W/L %</th><th>W/L Raw</th></tr>
        <REPLACE id="table"/>
    </table>

    <script>
        function newuser() {
            var name = prompt("Enter new person's name");
            if(name == null || name == "") {
                // cancelled
            } else {
                fetch("/chess/api/player?name=" + name, 
                    {"method": "PUT"}
                )
                .then(function (response) {
                    if(response.ok) {
                        setTimeout(function reload() {
                            window.location.replace(window.location);
                        }, 1000);
                    } else {
                        response.text().then(function r(t) {alert(t);});
                    }
                })
                .catch(function(r){alert(r);});
            }
        }

        function matchend() {
            window.location.replace("/chess/match");
        }

        function moduser() {
            window.location.replace("/chess/userlist");
        }
    </script>
</body>