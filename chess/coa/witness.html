<!DOCTYPE html>
<head>
    <title>Witness Selection</title>
    <style>
        input {
            width: 100%;
            height: 60px;
        }
        .green {
            font-weight: bold;
            color:green;
        }
        .red {
            color:lightcoral;
        }
    </style>
</head>
<body>
    <p>For case <REPLACE id='hearing.casestr'/>, <REPLACE id='hearing.title'/></p>
    <p>Witnesses with Discord in green, others in Red.</p>
    <p>If prefixed [Judge], they are the justice(s) hearing the case</p>
    <label>Witness Selected: </label> <select id='witness'><REPLACE id='witness'/></select>
    <p>Selecting witness for: <REPLACE id='for'/><br/>
        The caller will question first, then the opponent; then caller again, then opponent again; finally the justices if they desire
    </p>
    <input type="button" onclick="doSet();" value="Call Witness"/>
    <script>
        const NUMBER = "<REPLACE id='hearing.casenumber'/>"
        function doSet() {
            var d = document.getElementById("witness");
            var witnessId = d.value;
            fetch(`/chess/coa/call?num=${NUMBER}&witness=${witnessId}`,
                {"method": "PUT"}
            )
            .then(function (response) {
                if(response.ok) {
                    window.location.replace(`/chess/coa/hearing?num=${NUMBER}`)
                } else {
                    response.text().then(function r(t) {alert(t);});
                }
            })
            .catch(function(r){alert(r);});
        }
    </script>
</body>