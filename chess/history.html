<!DOCTYPE html>
<head>
    <title>Chess History <REPLACE id="target.name"/></title>
    <link rel="stylesheet" type="text/css" href="/css">
    <style>
        td.online {
            background-color: rgb(0, 102, 255);
        }
    </style>
</head>
<body>
    <h3>Chess Leaderboard History for <REPLACE id="target.name"/></h3>
    <REPLACE id="warnings"/>
    <table>
        <tr><th>Date</th><th>Played Against</th><th>Game Outcome</th></tr>
        <REPLACE id="table"/>
    </table>
    <footer>
        <br>
        <hr>
        <p><a href="/chess">Return to Leaderboard</a></p>
    </footer>
    <script>
        function dispute(day, year, user, against, index, state) {
            fetch(`/chess/api/dispute?day=${day}&year=${year}&user=${user}&against=${against}&index=${index}&state=${state}`, 
                    {"method": "PUT"}
                )
                .then(function (response) {
                    if(response.ok) {
                        window.location.replace(window.location)
                    } else {
                        response.text().then(function r(t) {alert(t);});
                    }
                })
                .catch(function(r){alert(r);});
        }

        function approveGame(ref) {
            fetch(`/chess/api/approve?reference=${ref}`, 
                    {"method": "PUT"}
                )
                .then(function (response) {
                    if(response.ok) {
                        window.location.href = "/chess"
                    } else {
                        response.text().then(function r(t) {alert(t);});
                    }
                })
                .catch(function(r){alert(r);});
        }

    </script>
</body>