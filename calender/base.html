<!DOCTYPE html>
<html>
    <head>
        <title>Calender / Scheduler</title> 
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fullcalendar-scheduler@5.8.0/main.min.css">
        <script src="https://cdn.jsdelivr.net/npm/fullcalendar-scheduler@5.8.0/main.min.js"></script>
        <script>
    
            document.addEventListener('DOMContentLoaded', function() {
                var calendarEl = document.getElementById('calendar');
                var calendar = new FullCalendar.Calendar(calendarEl, {
                    initialView: 'timeGridWeek',
                    firstDay: 1,
                    allDaySlot: false
                });
                calendar.on("dateClick", calendarDateClick);
                calendar.render();
                console.log(calendar);
            });

            var selectStart = null;
            function calendarDateClick(event) {
                console.log(event);

                if(event.jsEvent.shiftKey) {
                    if(selectStart) {
                        var end = event.date;

                        console.log(selectStart.toDateString());

                        var duration = end - selectStart;
                        var seconds = duration / 1000;
                        var hours = (seconds / 3600) + 0.5;
                        console.log(`UI: ${selectStart} for ${hours} hours`);
                        showPopupUi({
                            start: selectStart,
                            duration: hours * 60
                        })
                        selectStart = null;
                    } else {
                        selectStart = event.date;
                    }
                }

            }

            function showPopupUi(info) {
                var div = document.getElementById("popup");
                div.style.display = "block";
                console.log(info);
                var form = document.forms[0];
                form["start"].valueAsNumber = info.start.getTime();
                form["duration"].value = info.duration;
            }

            function formChange(event) {
                console.log(event);
            }

        </script>
    </head>
    <body>
        <div id='calendar'></div>

        <div id="popup" style="display: none; position: fixed; left: 0px; bottom: 0px; width: 100%; padding: 1%; margin: 0; background: grey; z-index: 999999;">
            <form style="width: 100%; height: 100%" onchange="formChange(event)">
                <label for="start">Start Date</label>
                <input type="datetime-local" name="start"/>
                <br/>

                <label for="duration">Duration (minutes)</label>
                <input type="number" min="0" max="1440" name="duration">
            </form>
        </div>
    </body>
</html>